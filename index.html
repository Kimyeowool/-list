<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì¶”ì²œ ìŒì•…</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: sans-serif;
      background: black;
      color: white;
      overflow: hidden;
    }

    #bgVideo {
      position: fixed;
      top: 50%;
      left: 50%;
      width: 120vw;
      height: 67.5vw;
      transform: translate(-50%, -50%);
      z-index: -1;
      pointer-events: none;
      filter: blur(25px);
    }

    .content {
      position: relative;
      z-index: 1;
      text-align: center;
      margin-top: 15vh;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }

    .genre-buttons,
    .action-buttons {
      margin-top: 2rem;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
    }

    button {
      padding: 10px 16px;
      font-size: 1rem;
      border: none;
      border-radius: 10px;
      background-color: white;
      color: black;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    button:hover {
      background-color: #eee;
    }

    iframe.mini-player {
      position: fixed;
      bottom: 16px;
      right: 16px;
      width: 240px;
      height: 135px;
      z-index: 10;
      border-radius: 8px;
    }

    .modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      color: black;
      padding: 20px;
      border-radius: 12px;
      z-index: 100;
      display: none;
    }

    .modal h2 {
      margin-bottom: 10px;
    }

    .modal ul {
      list-style: none;
      padding: 0;
    }

    .modal li {
      margin-bottom: 6px;
    }

    .modal button {
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <!-- ë°°ê²½ ì˜ìƒ -->
  <iframe
    id="bgVideo"
    src="https://www.youtube.com/embed/Acj_kh5TH-E?autoplay=1&mute=1&loop=1&playlist=Acj_kh5TH-E"
    frameborder="0"
    allow="autoplay; encrypted-media"
    allowfullscreen
  ></iframe>

  <!-- ì½˜í…ì¸  -->
  <div class="content">
    <h1>Today's recommended song</h1>
    <p id="songTitle">ì˜¤ëŠ˜ì˜ ì¶”ì²œê³¡: <b>KAZINO</b> (ì‚¬ì¥ë‹˜ ë„ë°•ì€ ì¬ë¯¸ë¡œ í•˜ì…”ì•¼ í•©ë‹ˆë‹¤)</p>

    <div class="genre-buttons">
      <button onclick="playRandom('indie')">ğŸ§ ì¸ë””</button>
      <button onclick="playRandom('pop')">âœï¸ íŒì†¡</button>
      <button onclick="playRandom('jpop')">ğŸ‡¯ğŸ‡µ ì¼ë³¸</button>
      <button onclick="playRandom('punk')">ğŸº í‘í¬</button>
    </div>

    <div class="action-buttons">
      <button onclick="likeCurrent()">â¤ï¸ ì¢‹ì•„ìš”</button>
      <button onclick="showLikes()">ğŸ§¡ ì¢‹ì•„ìš” ëª©ë¡</button>
      <button onclick="showRecent()">ğŸ“„ ìµœê·¼ ì¬ìƒ ëª©ë¡</button>
      <button onclick="copyShareLink()">ğŸ”— ê³µìœ í•˜ê¸°</button>
    </div>
  </div>

  <!-- ë¯¸ë‹ˆ í”Œë ˆì´ì–´ -->
  <iframe
    id="miniPlayer"
    class="mini-player"
    src="https://www.youtube.com/embed/Acj_kh5TH-E?autoplay=1&mute=0&loop=1&playlist=Acj_kh5TH-E"
    frameborder="0"
    allow="autoplay; encrypted-media"
    allowfullscreen
  ></iframe>

  <!-- ëª¨ë‹¬ -->
  <div id="modal" class="modal">
    <h2 id="modalTitle">ëª©ë¡</h2>
    <ul id="modalList"></ul>
    <button onclick="closeModal()">ë‹«ê¸°</button>
  </div>

  <script>
    const genrePlaylists = {
      indie: [
        { id: "Acj_kh5TH-E", title: "KAZINO" },
        { id: "y5R0eW3PkxM", title: "ì”ë‚˜ë¹„ - ì£¼ì €í•˜ëŠ” ì—°ì¸ë“¤ì„ ìœ„í•´" }
      ],
      pop: [
        { id: "3JZ4pnNtyxQ", title: "Billie Eilish - bad guy" },
        { id: "hT_nvWreIhg", title: "Imagine Dragons - Demons" }
      ],
      jpop: [
        { id: "f1YjR7REkNU", title: "Aimer - Brave Shine" },
        { id: "PbOjuwOaEyg", title: "YOASOBI - å¤œã«é§†ã‘ã‚‹" }
      ],
      punk: [
        { id: "JGwWNGJdvx8", title: "Green Day - Holiday" },
        { id: "K5KAc5CoCuk", title: "My Chemical Romance - Helena" }
      ]
    };

    let liked = [];
    let recent = [];

    function playRandom(genre) {
      const songs = genrePlaylists[genre];
      const song = songs[Math.floor(Math.random() * songs.length)];
      const url = `https://www.youtube.com/embed/${song.id}?autoplay=1&mute=1&loop=1&playlist=${song.id}`;
      const miniUrl = `https://www.youtube.com/embed/${song.id}?autoplay=1&mute=0&loop=1&playlist=${song.id}`;

      document.getElementById("bgVideo").src = url;
      document.getElementById("miniPlayer").src = miniUrl;
      document.getElementById("songTitle").innerHTML = `ì˜¤ëŠ˜ì˜ ì¶”ì²œê³¡: <b>${song.title}</b>`;
      recent.unshift(song);
      if (recent.length > 10) recent.pop();
    }

    function likeCurrent() {
      const title = document.getElementById("songTitle").textContent.replace("ì˜¤ëŠ˜ì˜ ì¶”ì²œê³¡: ", "").trim();
      if (!liked.find(song => song.title === title)) {
        liked.push({ title });
        alert("ì¢‹ì•„ìš”ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!");
      } else {
        alert("ì´ë¯¸ ì¢‹ì•„ìš”ì— ì¶”ê°€ëœ ê³¡ì…ë‹ˆë‹¤.");
      }
    }

    function showLikes() {
      openModal("ì¢‹ì•„ìš” ëª©ë¡", liked.map(item => item.title));
    }

    function showRecent() {
      openModal("ìµœê·¼ ì¬ìƒ ëª©ë¡", recent.map(item => item.title));
    }

    function copyShareLink() {
      const videoUrl = document.getElementById("miniPlayer").src;
      navigator.clipboard.writeText(videoUrl).then(() => {
        alert("ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
      });
    }

    function openModal(title, items) {
      document.getElementById("modalTitle").textContent = title;
      const list = document.getElementById("modalList");
      list.innerHTML = "";
      items.forEach(text => {
        const li = document.createElement("li");
        li.textContent = text;
        list.appendChild(li);
      });
      document.getElementById("modal").style.display = "block";
    }

    function closeModal() {
      document.getElementById("modal").style.display = "none";
    }
  </script>
</body>
</html>
