<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Today's recommended song</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background-color: black;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
    }

    #background-player {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: -1;
      filter: blur(30px);
      transform: scale(1.2);
      pointer-events: none;
    }

    .mini-player {
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 240px;
      height: 135px;
      z-index: 2;
      border: 2px solid white;
      background: black;
    }

    .content {
      text-align: center;
      z-index: 1;
    }

    .buttons {
      margin-top: 20px;
    }

    button {
      margin: 0 10px;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <!-- ë°°ê²½ ìœ íŠœë¸Œ í”Œë ˆì´ì–´ -->
  <div id="background-player">
    <div id="yt-background-iframe"></div>
  </div>

  <!-- ë¯¸ë‹ˆ ìœ íŠœë¸Œ í”Œë ˆì´ì–´ -->
  <div class="mini-player">
    <iframe
      id="mini-player"
      width="100%"
      height="100%"
      src=""
      frameborder="0"
      allow="autoplay; encrypted-media"
      allowfullscreen
    ></iframe>
  </div>

  <!-- ë©”ì¸ ì½˜í…ì¸  -->
  <div class="content">
    <h1>ì˜¤ëŠ˜ì˜ ì¶”ì²œê³¡</h1>
    <p id="current-song">ì˜¤ëŠ˜ì˜ ì¶”ì²œê³¡: </p>
    <div class="buttons">
      <button onclick="getRecommendation()">ğŸµ ì¶”ì²œê³¡ ë°›ê¸°</button>
      <button>â¤ï¸ ì¢‹ì•„ìš”</button>
      <button>ğŸ§¡ ì¢‹ì•„ìš” ëª©ë¡</button>
      <button>ğŸ”— ê³µìœ í•˜ê¸°</button>
    </div>
  </div>

  <!-- YouTube API ìŠ¤í¬ë¦½íŠ¸ -->
  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    const songs = [
      { title: "Imagine Dragons - Believer", videoId: "7wtfhZwyrcc" },
      { title: "Coi Leray - Players", videoId: "Y9Hvgo3Tc1k" },
      { title: "Billie Eilish - bad guy", videoId: "DyDfgMOUjCI" },
      { title: "The Weeknd - Blinding Lights", videoId: "fHI8X4OXluQ" },
    ];

    let backgroundPlayer = null;

    function getRecommendation() {
      const random = songs[Math.floor(Math.random() * songs.length)];
      document.getElementById('current-song').innerText = 'ì˜¤ëŠ˜ì˜ ì¶”ì²œê³¡: ' + random.title;

      // ë¯¸ë‹ˆí”Œë ˆì´ì–´ src ì„¤ì •
      const miniPlayer = document.getElementById('mini-player');
      miniPlayer.src = `https://www.youtube.com/embed/${random.videoId}?autoplay=1&controls=1`;

      // ë°°ê²½ í”Œë ˆì´ì–´ ì¬ìƒ
      createBackgroundPlayer(random.videoId);
    }

    function createBackgroundPlayer(videoId) {
      if (backgroundPlayer) {
        backgroundPlayer.loadVideoById(videoId);
      } else {
        backgroundPlayer = new YT.Player('yt-background-iframe', {
          height: '100%',
          width: '100%',
          videoId: videoId,
          playerVars: {
            autoplay: 1,
            mute: 1,
            controls: 0,
            loop: 1,
            playlist: videoId,
            modestbranding: 1,
            rel: 0
          },
          events: {
            onReady: e => {
              e.target.mute();
              e.target.playVideo();
            }
          }
        });
      }
    }
  </script>
</body>
</html>
